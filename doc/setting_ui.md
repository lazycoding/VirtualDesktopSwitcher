# VirtualDesktopSwitcher 配置界面技术方案

## 项目概述

本方案旨在为 VirtualDesktopSwitcher 应用程序开发一个配置界面，允许用户自定义应用的各种设置，包括手势识别参数、渲染选项和行为设置。

## 配置界面实现方案对比

### 1. 原生Windows对话框方案
- **优点**：轻量级，无需额外依赖，与系统风格一致
- **缺点**：界面相对单调，需要手动处理布局和控件事件
- **适用场景**：简单配置项

### 2. Web技术 (Webview2) 方案
- **优点**：界面灵活，易于开发，支持复杂交互
- **缺点**：需要Webview2运行时，包体积稍大
- **适用场景**：复杂的配置面板，需要丰富视觉效果

### 3. WPF 方案
- **优点**：现代化UI，数据绑定功能强大，界面美观
- **缺点**：需要.NET运行时，学习曲线较陡峭
- **适用场景**：需要现代化界面的应用

### 4. WinUI3 方案
- **优点**：现代化设计语言，流畅体验，微软官方推荐
- **缺点**：相对较新，部署复杂度较高
- **适用场景**：追求现代化体验的应用

## 推荐方案

基于VirtualDesktopSwitcher项目的特性，推荐采用**原生Windows对话框方案**，理由如下：

1. **项目一致性**：当前项目已使用Win32 API和原生Windows组件
2. **资源占用低**：不需要引入额外运行时，保持项目轻量级
3. **集成度高**：与现有系统托盘图标集成更容易
4. **开发效率**：利用现有代码结构，快速实现功能
5. **维护性好**：与项目其他部分保持一致的技术栈

## 配置界面设计原型

### 界面结构
```
虚拟桌面切换器 - 设置
┌─────────────────────────────────────┐
│ 基本设置                             │
│ ☑ 启动时自动运行     ☑ 显示系统托盘   │
│                                     │
│ 手势设置                           │
│ 手势触发按键： [侧键1 ▼]            │
│ 手势敏感度： [████████░░] 5        │
│ 手势线条粗细： [3] [5] [7] [9]      │
│ 手势颜色： [██████] #6495EDAA       │
│                                    │
│ 绘制模式                          │
│ ☑ Direct2D (高质量)               │
│ ☐ GDI (高性能)                     │
│                                             │
│ 桌面行为                          │
│ ☑ 循环切换虚拟桌面                 │
│ ☑ 显示桌面预览                    │
│                                             │
│ [保存] [取消] [应用]                │
└─────────────────────────────────────┘
```

### 配置项分类

#### 1. 基本设置
- 启动时自动运行（布尔值）
- 显示系统托盘（布尔值）

#### 2. 手势设置
- 触发按键（枚举：侧键1/侧键2）
- 手势敏感度（数值：1-10的滑块）
- 手势线宽（数值：1-10像素）
- 手势颜色（颜色选择器/HEX值）

#### 3. 渲染设置
- 绘制模式（枚举：Direct2D/GDI）
- 渲染质量（枚举：高性能/高质量）
- 透明度（滑块：0-100%）

#### 4. 行为设置
- 循环切换虚拟桌面（布尔值）
- 显示桌面预览（布尔值）
- 切换动画（布尔值）

## 技术实现细节

### 对话框资源定义
- 使用 Win32 资源脚本定义对话框布局
- 包含编辑框、复选框、单选按钮、滑块和下拉列表

### 数据绑定机制
- DialogProc 函数处理消息
- 读取和保存设置到 JSON 文件
- 实时预览功能（可选）

### 颜色选择器
- 使用系统颜色选择器 API
- 支持预设颜色和自定义颜色

## 开发计划

### 第一阶段：基础框架
- 创建 SettingsDialog 类
- 实现基本对话框窗口
- 连接配置数据的读取和写入

### 第二阶段：功能完善
- 添加各种控件的事件处理
- 实现数据验证
- 添加实时预览功能

### 第三阶段：用户体验
- 优化界面布局
- 添加键盘导航
- 实现帮助提示

## 预期结果

配置界面将提供直观的用户交互，允许用户自定义 VirtualDesktopSwitcher 的各项功能，提升用户体验和应用的灵活性。